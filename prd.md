# Next.js ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò Í≥ÑÌöç

## üìã ÌîÑÎ°úÏ†ùÌä∏ Í∞úÏöî

**ÌòÑÏû¨ ÏÉÅÌÉú**: Streamlit Í∏∞Î∞ò ÎÆ§ÏßÅÏπ¥Ïö∞ ÏãúÏû• Î∂ÑÏÑù ÎåÄÏãúÎ≥¥Îìú
**Î™©Ìëú**: Next.js 14 (App Router) + TypeScript Í∏∞Î∞ò Ïõπ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏúºÎ°ú ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò

---

## üéØ ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò Î™©Ìëú

### Í∏∞Ïà†Ï†Å Î™©Ìëú
- ‚úÖ **ÏÑ±Îä• Ìñ•ÏÉÅ**: SSR/SSGÎ•º ÌÜµÌïú Ï¥àÍ∏∞ Î°úÎî© ÏÜçÎèÑ Í∞úÏÑ†
- ‚úÖ **ÏÇ¨Ïö©Ïûê Í≤ΩÌóò**: Î∞òÏùëÌòï ÎîîÏûêÏù∏, Îçî Îπ†Î•∏ Ïù∏ÌÑ∞ÎûôÏÖò
- ‚úÖ **ÌôïÏû•ÏÑ±**: Î™®ÎìàÌôîÎêú Ïª¥Ìè¨ÎÑåÌä∏ Íµ¨Ï°∞Î°ú Ïú†ÏßÄÎ≥¥ÏàòÏÑ± Ìñ•ÏÉÅ
- ‚úÖ **SEO ÏµúÏ†ÅÌôî**: Í≤ÄÏÉâ ÏóîÏßÑ ÏµúÏ†ÅÌôî Î∞è ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ Í≥µÏú† Í∞úÏÑ†
- ‚úÖ **API Íµ¨Ï°∞**: RESTful API ÏóîÎìúÌè¨Ïù∏Ìä∏Î°ú Î∞±ÏóîÎìú Î∂ÑÎ¶¨

### ÎπÑÏ¶àÎãàÏä§ Î™©Ìëú
- üìä Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ (5Î∂Ñ ‚Üí Ïã§ÏãúÍ∞Ñ)
- üì± Î™®Î∞îÏùº Î∞òÏùëÌòï ÏßÄÏõê Í∞ïÌôî
- üîê ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ù ÏãúÏä§ÌÖú Ï∂îÍ∞Ä (ÏÑ†ÌÉùÏÇ¨Ìï≠)
- üìà ÏÇ¨Ïö©Ïûê Î∂ÑÏÑù Î∞è Ìä∏ÎûòÌÇπ Í∞úÏÑ†

---

## üèóÔ∏è Í∏∞Ïà† Ïä§ÌÉù

### Frontend
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript 5.x
- **Styling**: Tailwind CSS + shadcn/ui
- **Charts**: Recharts ÎòêÎäî Chart.js
- **State Management**: React Context + SWR/TanStack Query
- **Form Handling**: React Hook Form + Zod

### Backend (Next.js API Routes)
- **Runtime**: Node.js (Next.js API Routes)
- **API Client**: Axios
- **Data Validation**: Zod
- **Cache**: Redis (ÏÑ†ÌÉùÏÇ¨Ìï≠, SWRÎ°ú ÎåÄÏ≤¥ Í∞ÄÎä•)

### DevOps
- **Hosting**: Vercel (Í∂åÏû•) ÎòêÎäî AWS/GCP
- **CI/CD**: GitHub Actions
- **Monitoring**: Vercel Analytics + Sentry

---

## üìÅ ÌîÑÎ°úÏ†ùÌä∏ Íµ¨Ï°∞

```
nextjs-musicow/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/           # ÎåÄÏãúÎ≥¥Îìú Í∑∏Î£π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # ÎåÄÏãúÎ≥¥Îìú Î†àÏù¥ÏïÑÏõÉ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ instant/           # Ï¶âÏãú Ï≤¥Í≤∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ momentum/          # Í∞ÄÍ≤© Î™®Î©òÌÖÄ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yield/             # Í≥†ÏàòÏùµÎ•†
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ undervalued/       # Ï†ÄÌèâÍ∞Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ liquidity/         # Í≥†Ïú†ÎèôÏÑ±
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ value/             # Í∞ÄÏπò Ìà¨Ïûê
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category/          # Ïπ¥ÌÖåÍ≥†Î¶¨ Î∂ÑÏÑù
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ time-pattern/      # ÏãúÍ∞Ñ Ìå®ÌÑ¥
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.ts       # GET /api/orders - Ï£ºÎ¨∏ Îç∞Ïù¥ÌÑ∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metrics/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts   # GET /api/orders/metrics - ÏßÄÌëú Í≥ÑÏÇ∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ momentum/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts       # GET /api/momentum - Î™®Î©òÌÖÄ Î∂ÑÏÑù
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ summary/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts       # GET /api/summary - ÏöîÏïΩ ÌÜµÍ≥Ñ
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx             # Î£®Ìä∏ Î†àÏù¥ÏïÑÏõÉ
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx               # ÌôàÌéòÏù¥ÏßÄ
‚îÇ   ‚îî‚îÄ‚îÄ globals.css
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # shadcn/ui Ïª¥Ìè¨ÎÑåÌä∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tabs.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ charts/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SignalDistribution.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SpreadDistribution.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MomentumChart.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TimePatternChart.tsx
‚îÇ   ‚îú‚îÄ‚îÄ filters/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrderTypeFilter.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SignalFilter.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SpreadRangeFilter.tsx
‚îÇ   ‚îú‚îÄ‚îÄ tables/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrdersTable.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TopYieldTable.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ValueOpportunitiesTable.tsx
‚îÇ   ‚îî‚îÄ‚îÄ layout/
‚îÇ       ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ       ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Footer.tsx
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts          # API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÑ§Ï†ï
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.ts          # Ï£ºÎ¨∏ API Ìï®Ïàò
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metrics.ts         # ÏßÄÌëú API Ìï®Ïàò
‚îÇ   ‚îú‚îÄ‚îÄ metrics/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.ts      # ÏßÄÌëú Í≥ÑÏÇ∞ Î°úÏßÅ (Python ‚Üí TypeScript)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts           # ÌÉÄÏûÖ Ï†ïÏùò
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ format.ts          # Îç∞Ïù¥ÌÑ∞ Ìè¨Îß∑ÌåÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.ts      # Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
‚îÇ   ‚îî‚îÄ‚îÄ constants.ts           # ÏÉÅÏàò Ï†ïÏùò
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ order.ts               # Ï£ºÎ¨∏ ÌÉÄÏûÖ
‚îÇ   ‚îú‚îÄ‚îÄ metrics.ts             # ÏßÄÌëú ÌÉÄÏûÖ
‚îÇ   ‚îî‚îÄ‚îÄ api.ts                 # API ÏùëÎãµ ÌÉÄÏûÖ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useOrders.ts           # Ï£ºÎ¨∏ Îç∞Ïù¥ÌÑ∞ ÌõÖ
‚îÇ   ‚îú‚îÄ‚îÄ useMetrics.ts          # ÏßÄÌëú Îç∞Ïù¥ÌÑ∞ ÌõÖ
‚îÇ   ‚îî‚îÄ‚îÄ useFilters.ts          # ÌïÑÌÑ∞ ÏÉÅÌÉú ÌõÖ
‚îî‚îÄ‚îÄ public/
    ‚îî‚îÄ‚îÄ ...
```

---

## üìä ÌòÑÏû¨ Streamlit Ïï± Î∂ÑÏÑù

### Ï£ºÏöî Í∏∞Îä•
1. **Îç∞Ïù¥ÌÑ∞ ÏàòÏßë**: ÎÆ§ÏßÅÏπ¥Ïö∞ APIÏóêÏÑú Ïã§ÏãúÍ∞Ñ Ï£ºÎ¨∏ Îç∞Ïù¥ÌÑ∞ ÏàòÏßë
2. **ÏßÄÌëú Í≥ÑÏÇ∞**: MetricsEngineÏùÑ ÌÜµÌïú Î∞∞Ïπò ÏßÄÌëú Í≥ÑÏÇ∞
   - Ïä§ÌîÑÎ†àÎìúÏú® (Spread Rate)
   - ÏòàÏÉÅ ÏàòÏùµÎ•† (Expected Yield)
   - Ïú†ÎèôÏÑ± Ï†êÏàò (Liquidity Score)
   - Í∞ÄÍ≤© Î™®Î©òÌÖÄ (Price Momentum)
3. **ÌïÑÌÑ∞ÎßÅ**: Ï£ºÎ¨∏ ÌÉÄÏûÖ, ÏãúÍ∑∏ÎÑê, Ïä§ÌîÑÎ†àÎìúÏú® Î≤îÏúÑ, ÎåÄÎüâ Ï£ºÎ¨∏
4. **ÏãúÍ∞ÅÌôî**: 9Í∞ú ÌÉ≠ÏúºÎ°ú Íµ¨ÏÑ±Îêú ÎåÄÏãúÎ≥¥Îìú
   - Ï¶âÏãú Ï≤¥Í≤∞ (Instant Match)
   - Í∞ÄÍ≤© Î™®Î©òÌÖÄ (Price Momentum)
   - Í≥†ÏàòÏùµÎ•† Top 10
   - Ï†ÄÌèâÍ∞Ä Top 10
   - Í≥†Ïú†ÎèôÏÑ± Top 10
   - Í∞ÄÏπò Ìà¨Ïûê Í∏∞Ìöå
   - Ïπ¥ÌÖåÍ≥†Î¶¨ Î∂ÑÏÑù
   - ÏãúÍ∞Ñ Ìå®ÌÑ¥
   - Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞

### Îç∞Ïù¥ÌÑ∞ ÌùêÎ¶Ñ
```
ÎÆ§ÏßÅÏπ¥Ïö∞ API ‚Üí Streamlit Cache ‚Üí MetricsEngine ‚Üí DataFrame ‚Üí ÏãúÍ∞ÅÌôî
```

---

## üîÑ ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò Îã®Í≥ÑÎ≥Ñ Í≥ÑÌöç

### Phase 1: ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ï Î∞è Í∏∞Î≥∏ Íµ¨Ï°∞ (1-2Ï£º)

#### 1.1 ÌîÑÎ°úÏ†ùÌä∏ Ï¥àÍ∏∞Ìôî
```bash
npx create-next-app@latest musicow-nextjs --typescript --tailwind --app
cd musicow-nextjs
```

#### 1.2 ÌïÑÏàò Ìå®ÌÇ§ÏßÄ ÏÑ§Ïπò
```bash
# UI ÎùºÏù¥Î∏åÎü¨Î¶¨
npx shadcn-ui@latest init
npx shadcn-ui@latest add button card tabs select slider input

# Ï∞®Ìä∏ ÎùºÏù¥Î∏åÎü¨Î¶¨
npm install recharts

# Îç∞Ïù¥ÌÑ∞ ÌéòÏπ≠ Î∞è ÏÉÅÌÉú Í¥ÄÎ¶¨
npm install @tanstack/react-query axios

# Ïú†Ìã∏Î¶¨Ìã∞
npm install date-fns zod react-hook-form @hookform/resolvers

# Í∞úÎ∞ú ÎèÑÍµ¨
npm install -D @types/node
```

#### 1.3 TypeScript ÌÉÄÏûÖ Ï†ïÏùò
```typescript
// types/order.ts
export interface Order {
  order_id: string;
  order_date: string;
  song_name: string;
  song_artist: string;
  song_category: string;
  order_type: 'Íµ¨Îß§' | 'ÌåêÎß§';
  order_status: 'ÎåÄÍ∏∞' | 'Ï≤¥Í≤∞' | 'Ï∑®ÏÜå';
  order_price: number;
  recent_price: number;
  order_royalty_rate: number;
  // ... Í∏∞ÌÉÄ ÌïÑÎìú
}

// types/metrics.ts
export interface Metrics {
  spread_rate: number;
  expected_yield: number;
  liquidity_score: number;
  signal: string;
}

export interface OrderWithMetrics extends Order, Metrics {}
```

---

### Phase 2: API Í≥ÑÏ∏µ Íµ¨Ï∂ï (2-3Ï£º)

#### 2.1 Python Î°úÏßÅÏùÑ TypeScriptÎ°ú Î≥ÄÌôò

**Ïö∞ÏÑ†ÏàúÏúÑ 1: ÏßÄÌëú Í≥ÑÏÇ∞ ÏóîÏßÑ (MetricsEngine)**
```typescript
// lib/metrics/calculator.ts

export class MetricsCalculator {
  /**
   * Ïä§ÌîÑÎ†àÎìúÏú® Í≥ÑÏÇ∞
   * Python: (order_price - recent_price) / recent_price * 100
   */
  calculateSpreadRate(orderPrice: number, recentPrice: number): number {
    if (!recentPrice || recentPrice === 0) return 0;
    return ((orderPrice - recentPrice) / recentPrice) * 100;
  }

  /**
   * ÏòàÏÉÅ ÏàòÏùµÎ•† Í≥ÑÏÇ∞
   * Python: (royalty_rate * base_price) / order_price * 100
   */
  calculateExpectedYield(
    royaltyRate: number,
    basePrice: number,
    orderPrice: number
  ): number {
    if (!orderPrice || orderPrice === 0) return 0;
    return ((royaltyRate * basePrice) / orderPrice) * 100;
  }

  /**
   * Ïú†ÎèôÏÑ± Ï†êÏàò Í≥ÑÏÇ∞
   * Python: spread_score * 0.4 + depth_score * 0.3 + frequency_score * 0.3
   */
  calculateLiquidityScore(order: Order, allOrders: Order[]): number {
    // Íµ¨ÌòÑ...
  }

  /**
   * Í∞ÄÍ≤© Î™®Î©òÌÖÄ Í≥ÑÏÇ∞
   */
  calculatePriceMomentum(orders: Order[], songName: string): MomentumData {
    // Íµ¨ÌòÑ...
  }

  /**
   * Î∞∞Ïπò ÏßÄÌëú Í≥ÑÏÇ∞ (Ï†ÑÏ≤¥ Ï£ºÎ¨∏Ïóê ÎåÄÌï¥)
   */
  calculateBatchMetrics(orders: Order[]): OrderWithMetrics[] {
    return orders.map(order => ({
      ...order,
      spread_rate: this.calculateSpreadRate(order.order_price, order.recent_price),
      expected_yield: this.calculateExpectedYield(
        order.order_royalty_rate,
        order.order_base_price,
        order.order_price
      ),
      liquidity_score: this.calculateLiquidityScore(order, orders),
      signal: this.generateSignal(order, orders),
    }));
  }
}
```

#### 2.2 Next.js API Routes Íµ¨ÌòÑ

**GET /api/orders/route.ts**
```typescript
import { NextRequest, NextResponse } from 'next/server';
import axios from 'axios';
import { MetricsCalculator } from '@/lib/metrics/calculator';

const MUSICOW_API_URL = 'https://data.musicow.com/files/v1/market/orders.json';

export async function GET(request: NextRequest) {
  try {
    // ÎÆ§ÏßÅÏπ¥Ïö∞ APIÏóêÏÑú Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
    const response = await axios.get(MUSICOW_API_URL, { timeout: 30000 });
    const rawOrders = response.data;

    // ÏßÄÌëú Í≥ÑÏÇ∞
    const calculator = new MetricsCalculator();
    const ordersWithMetrics = calculator.calculateBatchMetrics(rawOrders);

    return NextResponse.json({
      success: true,
      data: ordersWithMetrics,
      timestamp: new Date().toISOString(),
    });
  } catch (error) {
    console.error('API Error:', error);
    return NextResponse.json(
      { success: false, error: 'Failed to fetch orders' },
      { status: 500 }
    );
  }
}
```

**GET /api/summary/route.ts**
```typescript
export async function GET(request: NextRequest) {
  const ordersResponse = await fetch(`${process.env.NEXT_PUBLIC_BASE_URL}/api/orders`);
  const { data: orders } = await ordersResponse.json();

  const summary = {
    total_orders: orders.length,
    buy_orders: orders.filter((o: Order) => o.order_type === 'Íµ¨Îß§').length,
    sell_orders: orders.filter((o: Order) => o.order_type === 'ÌåêÎß§').length,
    avg_spread: calculateAverage(orders, 'spread_rate'),
    avg_yield: calculateAverage(orders, 'expected_yield'),
    // ...
  };

  return NextResponse.json({ success: true, data: summary });
}
```

#### 2.3 Ï∫êÏã± Ï†ÑÎûµ

**Option 1: SWR (Í∂åÏû• - Í∞ÑÎã®Ìïú Íµ¨ÌòÑ)**
```typescript
// hooks/useOrders.ts
import useSWR from 'swr';

export function useOrders() {
  const { data, error, isLoading } = useSWR(
    '/api/orders',
    fetcher,
    {
      refreshInterval: 300000, // 5Î∂ÑÎßàÎã§ ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ®
      revalidateOnFocus: true,
    }
  );

  return { orders: data?.data, error, isLoading };
}
```

**Option 2: TanStack Query (Îçî Í∞ïÎ†•Ìïú Í∏∞Îä•)**
```typescript
// hooks/useOrders.ts
import { useQuery } from '@tanstack/react-query';

export function useOrders() {
  return useQuery({
    queryKey: ['orders'],
    queryFn: fetchOrders,
    staleTime: 300000, // 5Î∂Ñ
    refetchInterval: 300000,
  });
}
```

---

### Phase 3: UI Ïª¥Ìè¨ÎÑåÌä∏ Í∞úÎ∞ú (3-4Ï£º)

#### 3.1 Î†àÏù¥ÏïÑÏõÉ Ïª¥Ìè¨ÎÑåÌä∏

**app/layout.tsx**
```typescript
import { Header } from '@/components/layout/Header';
import { Sidebar } from '@/components/layout/Sidebar';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ko">
      <body>
        <div className="flex h-screen">
          <Sidebar />
          <div className="flex-1 flex flex-col">
            <Header />
            <main className="flex-1 overflow-auto p-6">{children}</main>
          </div>
        </div>
      </body>
    </html>
  );
}
```

#### 3.2 ÎåÄÏãúÎ≥¥Îìú Î©îÏù∏ ÌéòÏù¥ÏßÄ

**app/(dashboard)/page.tsx**
```typescript
'use client';

import { useOrders } from '@/hooks/useOrders';
import { SummaryCards } from '@/components/dashboard/SummaryCards';
import { SignalDistribution } from '@/components/charts/SignalDistribution';
import { SpreadDistribution } from '@/components/charts/SpreadDistribution';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

export default function DashboardPage() {
  const { orders, isLoading, error } = useOrders();

  if (isLoading) return <LoadingSpinner />;
  if (error) return <ErrorMessage error={error} />;

  return (
    <div className="space-y-6">
      {/* ÏöîÏïΩ Ïπ¥Îìú */}
      <SummaryCards orders={orders} />

      {/* Ï∞®Ìä∏ ÏÑπÏÖò */}
      <div className="grid grid-cols-2 gap-6">
        <SignalDistribution data={orders} />
        <SpreadDistribution data={orders} />
      </div>

      {/* ÌÉ≠ ÏÑπÏÖò */}
      <Tabs defaultValue="instant">
        <TabsList>
          <TabsTrigger value="instant">‚ö° Ï¶âÏãú Ï≤¥Í≤∞</TabsTrigger>
          <TabsTrigger value="momentum">üíπ Í∞ÄÍ≤© Î™®Î©òÌÖÄ</TabsTrigger>
          {/* ... Í∏∞ÌÉÄ ÌÉ≠ */}
        </TabsList>

        <TabsContent value="instant">
          <InstantMatchTab orders={orders} />
        </TabsContent>

        <TabsContent value="momentum">
          <MomentumTab orders={orders} />
        </TabsContent>

        {/* ... */}
      </Tabs>
    </div>
  );
}
```

#### 3.3 Ï∞®Ìä∏ Ïª¥Ìè¨ÎÑåÌä∏ (Plotly ‚Üí Recharts)

**components/charts/SignalDistribution.tsx**
```typescript
'use client';

import { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from 'recharts';

const COLORS = {
  'Ï£ºÏùò': '#dc2626',
  'Ïú†ÎèôÏÑ±‚Üì': '#f59e0b',
  'Î≥¥ÌÜµ': '#6b7280',
  'Ï†ÄÌèâÍ∞Ä': '#10b981',
  'Í≥†ÌèâÍ∞Ä': '#ef4444',
  'Ïú†ÎèôÏÑ±‚Üë': '#3b82f6',
};

export function SignalDistribution({ data }: { data: OrderWithMetrics[] }) {
  const signalCounts = data.reduce((acc, order) => {
    acc[order.signal] = (acc[order.signal] || 0) + 1;
    return acc;
  }, {} as Record<string, number>);

  const chartData = Object.entries(signalCounts).map(([signal, count]) => ({
    name: signal,
    value: count,
  }));

  return (
    <div className="bg-white p-6 rounded-lg shadow">
      <h3 className="text-lg font-semibold mb-4">üéØ ÏãúÍ∑∏ÎÑê Î∂ÑÌè¨</h3>
      <ResponsiveContainer width="100%" height={350}>
        <PieChart>
          <Pie
            data={chartData}
            cx="50%"
            cy="50%"
            innerRadius={60}
            outerRadius={100}
            fill="#8884d8"
            dataKey="value"
            label
          >
            {chartData.map((entry) => (
              <Cell key={entry.name} fill={COLORS[entry.name]} />
            ))}
          </Pie>
          <Tooltip />
          <Legend />
        </PieChart>
      </ResponsiveContainer>
    </div>
  );
}
```

#### 3.4 ÌïÑÌÑ∞ Ïª¥Ìè¨ÎÑåÌä∏

**components/filters/OrderFilters.tsx**
```typescript
'use client';

import { useState } from 'react';
import { Select } from '@/components/ui/select';
import { Slider } from '@/components/ui/slider';

export function OrderFilters({ onFilterChange }: { onFilterChange: (filters: Filters) => void }) {
  const [orderTypes, setOrderTypes] = useState<string[]>(['Íµ¨Îß§', 'ÌåêÎß§']);
  const [spreadRange, setSpreadRange] = useState<[number, number]>([-50, 50]);

  return (
    <div className="space-y-4">
      <div>
        <label>Ï£ºÎ¨∏ ÌÉÄÏûÖ</label>
        <Select
          multiple
          value={orderTypes}
          onValueChange={setOrderTypes}
        >
          <option value="Íµ¨Îß§">Íµ¨Îß§</option>
          <option value="ÌåêÎß§">ÌåêÎß§</option>
        </Select>
      </div>

      <div>
        <label>Ïä§ÌîÑÎ†àÎìúÏú® Î≤îÏúÑ (%)</label>
        <Slider
          value={spreadRange}
          onValueChange={setSpreadRange}
          min={-50}
          max={50}
          step={1}
        />
      </div>
    </div>
  );
}
```

---

### Phase 4: Í≥†Í∏â Í∏∞Îä• Íµ¨ÌòÑ (2-3Ï£º)

#### 4.1 Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏

**Server-Sent Events (SSE) ÎòêÎäî WebSocket**
```typescript
// app/api/orders/stream/route.ts
export async function GET(request: NextRequest) {
  const encoder = new TextEncoder();
  const stream = new TransformStream();
  const writer = stream.writable.getWriter();

  const interval = setInterval(async () => {
    const orders = await fetchLatestOrders();
    writer.write(encoder.encode(`data: ${JSON.stringify(orders)}\n\n`));
  }, 5000); // 5Ï¥àÎßàÎã§

  request.signal.addEventListener('abort', () => {
    clearInterval(interval);
    writer.close();
  });

  return new Response(stream.readable, {
    headers: {
      'Content-Type': 'text/event-stream',
      'Cache-Control': 'no-cache',
      Connection: 'keep-alive',
    },
  });
}
```

#### 4.2 Í≥†Í∏â ÌïÑÌÑ∞ÎßÅ Î∞è Í≤ÄÏÉâ

**Ï†ÑÏ≤¥ ÌÖçÏä§Ìä∏ Í≤ÄÏÉâ**
```typescript
// lib/utils/search.ts
export function searchOrders(orders: Order[], query: string): Order[] {
  const lowerQuery = query.toLowerCase();
  return orders.filter(
    (order) =>
      order.song_name.toLowerCase().includes(lowerQuery) ||
      order.song_artist.toLowerCase().includes(lowerQuery)
  );
}
```

#### 4.3 Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞

**CSV/Excel ÎÇ¥Î≥¥ÎÇ¥Í∏∞**
```typescript
// components/ExportButton.tsx
import { downloadCSV } from '@/lib/utils/export';

export function ExportButton({ data }: { data: OrderWithMetrics[] }) {
  const handleExport = () => {
    const csv = convertToCSV(data);
    downloadCSV(csv, 'musicow_orders.csv');
  };

  return <Button onClick={handleExport}>üì• CSV Îã§Ïö¥Î°úÎìú</Button>;
}
```

#### 4.4 ÏÇ¨Ïö©Ïûê ÏÑ§Ï†ï Ï†ÄÏû•

**LocalStorageÎ•º ÌôúÏö©Ìïú ÌïÑÌÑ∞ ÏÉÅÌÉú Ï†ÄÏû•**
```typescript
// hooks/usePersistedFilters.ts
import { useState, useEffect } from 'react';

export function usePersistedFilters() {
  const [filters, setFilters] = useState<Filters>(() => {
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('dashboard-filters');
      return saved ? JSON.parse(saved) : DEFAULT_FILTERS;
    }
    return DEFAULT_FILTERS;
  });

  useEffect(() => {
    localStorage.setItem('dashboard-filters', JSON.stringify(filters));
  }, [filters]);

  return [filters, setFilters] as const;
}
```

---

### Phase 5: ÏµúÏ†ÅÌôî Î∞è Î∞∞Ìè¨ (1-2Ï£º)

#### 5.1 ÏÑ±Îä• ÏµúÏ†ÅÌôî

**Ïù¥ÎØ∏ÏßÄ ÏµúÏ†ÅÌôî**
```typescript
import Image from 'next/image';

<Image
  src="/logo.png"
  alt="Musicow"
  width={200}
  height={50}
  priority
/>
```

**ÏΩîÎìú Ïä§ÌîåÎ¶¨ÌåÖ**
```typescript
import dynamic from 'next/dynamic';

const HeavyChart = dynamic(() => import('@/components/charts/HeavyChart'), {
  ssr: false,
  loading: () => <Skeleton />,
});
```

**Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ ÏµúÏ†ÅÌôî**
```typescript
// app/layout.tsx
export const metadata = {
  title: 'ÎÆ§ÏßÅÏπ¥Ïö∞ ÏãúÏû• Î∂ÑÏÑù ÎåÄÏãúÎ≥¥Îìú',
  description: 'Ïã§ÏãúÍ∞Ñ ÏùåÏïÖ Ï†ÄÏûëÍ∂å Í±∞Îûò Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù',
  openGraph: {
    title: 'ÎÆ§ÏßÅÏπ¥Ïö∞ ÏãúÏû• Î∂ÑÏÑù',
    description: 'Ïã§ÏãúÍ∞Ñ ÏùåÏïÖ Ï†ÄÏûëÍ∂å Í±∞Îûò Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù',
    images: ['/og-image.png'],
  },
};
```

#### 5.2 Vercel Î∞∞Ìè¨

**vercel.json**
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "env": {
    "NEXT_PUBLIC_API_URL": "https://data.musicow.com"
  }
}
```

**GitHub Actions CI/CD**
```yaml
# .github/workflows/deploy.yml
name: Deploy to Vercel

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - run: npm ci
      - run: npm run build
      - run: npm run test
      - uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```

#### 5.3 Î™®ÎãàÌÑ∞ÎßÅ ÏÑ§Ï†ï

**Vercel Analytics**
```typescript
// app/layout.tsx
import { Analytics } from '@vercel/analytics/react';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <Analytics />
      </body>
    </html>
  );
}
```

**Sentry ÏóêÎü¨ Ìä∏ÎûòÌÇπ**
```typescript
// lib/sentry.ts
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1.0,
});
```

---

## üîÑ Îç∞Ïù¥ÌÑ∞ Î≥ÄÌôò ÎßµÌïë

### Python ‚Üí TypeScript ÏßÄÌëú Í≥ÑÏÇ∞ Ìï®Ïàò

| Python Ìï®Ïàò | TypeScript Ìï®Ïàò | Î≥µÏû°ÎèÑ | Ïö∞ÏÑ†ÏàúÏúÑ |
|-------------|-----------------|--------|----------|
| `calculate_spread_rate()` | `calculateSpreadRate()` | ÎÇÆÏùå | ÎÜíÏùå |
| `calculate_expected_yield()` | `calculateExpectedYield()` | ÎÇÆÏùå | ÎÜíÏùå |
| `calculate_liquidity_score()` | `calculateLiquidityScore()` | Ï§ëÍ∞Ñ | ÎÜíÏùå |
| `calculate_price_momentum()` | `calculatePriceMomentum()` | ÎÜíÏùå | Ï§ëÍ∞Ñ |
| `generate_signal()` | `generateSignal()` | Ï§ëÍ∞Ñ | ÎÜíÏùå |
| `calculate_batch_metrics()` | `calculateBatchMetrics()` | ÎÇÆÏùå | ÎÜíÏùå |

### Streamlit Ïª¥Ìè¨ÎÑåÌä∏ ‚Üí Next.js Ïª¥Ìè¨ÎÑåÌä∏

| Streamlit | Next.js | ÎùºÏù¥Î∏åÎü¨Î¶¨ |
|-----------|---------|-----------|
| `st.metric()` | `<MetricCard>` | shadcn/ui Card |
| `st.dataframe()` | `<DataTable>` | TanStack Table |
| `px.pie()` | `<PieChart>` | Recharts |
| `px.bar()` | `<BarChart>` | Recharts |
| `px.scatter()` | `<ScatterChart>` | Recharts |
| `st.multiselect()` | `<MultiSelect>` | shadcn/ui Select |
| `st.slider()` | `<Slider>` | shadcn/ui Slider |
| `st.tabs()` | `<Tabs>` | shadcn/ui Tabs |

---

## üìã Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏

### Phase 1: ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ï
- [ ] Next.js ÌîÑÎ°úÏ†ùÌä∏ ÏÉùÏÑ±
- [ ] TypeScript ÏÑ§Ï†ï
- [ ] Tailwind CSS + shadcn/ui ÏÑ§Ï†ï
- [ ] ÌîÑÎ°úÏ†ùÌä∏ Íµ¨Ï°∞ ÏÉùÏÑ±
- [ ] ÌÉÄÏûÖ Ï†ïÏùò ÏûëÏÑ±

### Phase 2: API Í≥ÑÏ∏µ
- [ ] MetricsCalculator ÌÅ¥ÎûòÏä§ Íµ¨ÌòÑ
- [ ] /api/orders ÏóîÎìúÌè¨Ïù∏Ìä∏
- [ ] /api/summary ÏóîÎìúÌè¨Ïù∏Ìä∏
- [ ] /api/momentum ÏóîÎìúÌè¨Ïù∏Ìä∏
- [ ] ÏóêÎü¨ Ìï∏Îì§ÎßÅ Íµ¨ÌòÑ
- [ ] Ï∫êÏã± Ï†ÑÎûµ Íµ¨ÌòÑ

### Phase 3: UI Ïª¥Ìè¨ÎÑåÌä∏
- [ ] Î†àÏù¥ÏïÑÏõÉ Ïª¥Ìè¨ÎÑåÌä∏ (Header, Sidebar)
- [ ] ÎåÄÏãúÎ≥¥Îìú Î©îÏù∏ ÌéòÏù¥ÏßÄ
- [ ] ÏöîÏïΩ Ïπ¥Îìú Ïª¥Ìè¨ÎÑåÌä∏
- [ ] Ï∞®Ìä∏ Ïª¥Ìè¨ÎÑåÌä∏ (ÏãúÍ∑∏ÎÑê, Ïä§ÌîÑÎ†àÎìú, Î™®Î©òÌÖÄ)
- [ ] ÌïÑÌÑ∞ Ïª¥Ìè¨ÎÑåÌä∏
- [ ] ÌÖåÏù¥Î∏î Ïª¥Ìè¨ÎÑåÌä∏
- [ ] ÌÉ≠ ÌéòÏù¥ÏßÄ (9Í∞ú)

### Phase 4: Í≥†Í∏â Í∏∞Îä•
- [ ] Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏
- [ ] Í≤ÄÏÉâ Í∏∞Îä•
- [ ] CSV ÎÇ¥Î≥¥ÎÇ¥Í∏∞
- [ ] ÏÇ¨Ïö©Ïûê ÏÑ§Ï†ï Ï†ÄÏû•
- [ ] Î∞òÏùëÌòï ÎîîÏûêÏù∏

### Phase 5: ÏµúÏ†ÅÌôî Î∞è Î∞∞Ìè¨
- [ ] ÏÑ±Îä• ÏµúÏ†ÅÌôî (ÏΩîÎìú Ïä§ÌîåÎ¶¨ÌåÖ, Ïù¥ÎØ∏ÏßÄ ÏµúÏ†ÅÌôî)
- [ ] SEO ÏµúÏ†ÅÌôî (Î©îÌÉÄÎç∞Ïù¥ÌÑ∞, sitemap)
- [ ] Vercel Î∞∞Ìè¨
- [ ] CI/CD ÌååÏù¥ÌîÑÎùºÏù∏ Íµ¨Ï∂ï
- [ ] Î™®ÎãàÌÑ∞ÎßÅ ÏÑ§Ï†ï (Analytics, Sentry)

---

## üöÄ Î∞∞Ìè¨ Ï†ÑÎûµ

### Îã®Í≥ÑÏ†Å Î∞∞Ìè¨ (Phased Rollout)
1. **Î≤†ÌÉÄ Î≤ÑÏ†Ñ**: ÎÇ¥Î∂Ä ÌÖåÏä§Ìä∏Ïö© (beta.musicow-dashboard.com)
2. **Ïπ¥ÎÇòÎ¶¨ Î∞∞Ìè¨**: 10% Ìä∏ÎûòÌîΩ (ÏÉà Î≤ÑÏ†Ñ ÌÖåÏä§Ìä∏)
3. **Ï†ÑÏ≤¥ Î∞∞Ìè¨**: 100% Ìä∏ÎûòÌîΩ Ï†ÑÌôò

### Î°§Î∞± Í≥ÑÌöç
- VercelÏùò ÏûêÎèô Î°§Î∞± Í∏∞Îä• ÌôúÏö©
- Git Î∏åÎûúÏπò Ï†ÑÎûµ: main (production), develop (staging)

---

## ‚è±Ô∏è ÏòàÏÉÅ ÏùºÏ†ï

| Phase | Í∏∞Í∞Ñ | Ï£ºÏöî ÎßàÏùºÏä§ÌÜ§ |
|-------|------|---------------|
| Phase 1 | 1-2Ï£º | ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ï ÏôÑÎ£å |
| Phase 2 | 2-3Ï£º | API Í≥ÑÏ∏µ Íµ¨Ï∂ï ÏôÑÎ£å |
| Phase 3 | 3-4Ï£º | UI Ïª¥Ìè¨ÎÑåÌä∏ Í∞úÎ∞ú ÏôÑÎ£å |
| Phase 4 | 2-3Ï£º | Í≥†Í∏â Í∏∞Îä• Íµ¨ÌòÑ ÏôÑÎ£å |
| Phase 5 | 1-2Ï£º | Î∞∞Ìè¨ Î∞è ÏµúÏ†ÅÌôî ÏôÑÎ£å |
| **Ï¥ù Í∏∞Í∞Ñ** | **9-14Ï£º** | **Ï†ÑÏ≤¥ ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò ÏôÑÎ£å** |

---

## üí° Ï∂îÍ∞Ä Í≥†Î†§ÏÇ¨Ìï≠

### Î≥¥Ïïà
- [ ] API ÌÇ§ ÌôòÍ≤ΩÎ≥ÄÏàò Í¥ÄÎ¶¨ (.env.local)
- [ ] CORS ÏÑ§Ï†ï
- [ ] Rate Limiting (API Ìò∏Ï∂ú Ï†úÌïú)
- [ ] XSS, CSRF Î∞©Ïñ¥

### Ï†ëÍ∑ºÏÑ±
- [ ] ÌÇ§Î≥¥Îìú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÏßÄÏõê
- [ ] ARIA Î†àÏù¥Î∏î Ï∂îÍ∞Ä
- [ ] ÏÉâÎßπ ÎåÄÏùë (ÏÉâÏÉÅ ÏΩòÌä∏ÎùºÏä§Ìä∏)

### Íµ≠Ï†úÌôî (i18n)
- [ ] next-intl ÏÑ§Ï†ï (ÌïúÍµ≠Ïñ¥/ÏòÅÏñ¥)
- [ ] ÎÇ†Ïßú/ÏãúÍ∞Ñ Ìè¨Îß∑ Î°úÏºÄÏùº ÎåÄÏùë

### ÌÖåÏä§Ìä∏
- [ ] Jest + React Testing Library ÏÑ§Ï†ï
- [ ] E2E ÌÖåÏä§Ìä∏ (Playwright)
- [ ] API ÌÖåÏä§Ìä∏ (Vitest)

---

## üìö Ï∞∏Í≥† ÏûêÎ£å

- [Next.js 14 Í≥µÏãù Î¨∏ÏÑú](https://nextjs.org/docs)
- [shadcn/ui Ïª¥Ìè¨ÎÑåÌä∏](https://ui.shadcn.com/)
- [Recharts Î¨∏ÏÑú](https://recharts.org/)
- [TanStack Query](https://tanstack.com/query/latest)
- [Vercel Î∞∞Ìè¨ Í∞ÄÏù¥Îìú](https://vercel.com/docs)

---

## ‚úÖ ÏÑ±Í≥µ Í∏∞Ï§Ä

1. **ÏÑ±Îä•**: Ï¥àÍ∏∞ Î°úÎî© ÏãúÍ∞Ñ < 3Ï¥à, Lighthouse Ï†êÏàò 90+
2. **ÏïàÏ†ïÏÑ±**: 99.9% ÏóÖÌÉÄÏûÑ, ÏóêÎü¨Ïú® < 0.1%
3. **ÏÇ¨Ïö©Ïûê Í≤ΩÌóò**: Î™®Î∞îÏùº Î∞òÏùëÌòï, Ï†ëÍ∑ºÏÑ± AA Îì±Í∏â
4. **Ïú†ÏßÄÎ≥¥Ïàò**: Î™®ÎìàÌôîÎêú ÏΩîÎìú, 90%+ ÌÖåÏä§Ìä∏ Ïª§Î≤ÑÎ¶¨ÏßÄ

---

**ÏûëÏÑ±Ïùº**: 2025-10-15
**ÏµúÏ¢Ö ÏàòÏ†ïÏùº**: 2025-10-15
**Î≤ÑÏ†Ñ**: 1.0
